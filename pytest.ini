[tool:pytest]
# Pytest Configuration for Python Sprite Viewer
# Professional testing setup with markers, coverage, and CI integration

# Test discovery  
testpaths = tests
# Exclude archive and development files
norecursedirs = archive build dist *.egg .tox venv
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Minimum version requirements
minversion = 7.0

# Additional options (Qt-optimized)
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --durations=10
    --maxfail=3
    --disable-warnings
    -p no:cacheprovider

# Test markers for organization
markers =
    unit: Unit tests (fast, isolated components)
    integration: Integration tests (multi-component workflows)
    ui: UI component tests (requires Qt/display)
    performance: Performance and load tests
    slow: Tests that take more than 2 seconds
    smoke: Critical functionality smoke tests
    regression: Regression tests for bug fixes
    
    # Component-specific markers
    sprite_model: Tests for sprite model components
    animation: Animation system tests
    detection: Auto-detection algorithm tests  
    file_ops: File operation tests
    config: Configuration system tests
    
    # Test environment markers
    requires_display: Tests requiring GUI display
    requires_files: Tests requiring test sprite files
    memory_intensive: Tests that use significant memory

# Filters and warnings (Qt-optimized)
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning:pkg_resources.*
    ignore::PendingDeprecationWarning
    ignore:.*QApplication.*:DeprecationWarning
    ignore:.*Qt.*:DeprecationWarning
    ignore:.*PySide6.*:DeprecationWarning
    ignore:.*shiboken6.*:DeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore:.*unclosed.*:ResourceWarning
    ignore:.*QObject.*:RuntimeWarning
    ignore:.*QThread.*:RuntimeWarning
    ignore:.*QPixmap.*:RuntimeWarning
    ignore:.*QWidget.*:RuntimeWarning

# Coverage configuration
[coverage:run]
source = .
omit = 
    venv/*
    __pycache__/*
    *.pyc
    tests/*
    archive/*
    build/*
    dist/*
    .tox/*
    setup.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING: